(this["webpackJsonpbusiness-activity-frontend"]=this["webpackJsonpbusiness-activity-frontend"]||[]).push([[0],{36:function(e,t,r){},54:function(e,t,r){},75:function(e,t,r){},76:function(e,t,r){"use strict";r.r(t);var n=r(1),c=r.n(n),a=r(28),s=r.n(a),o=(r(35),r(36),r(8)),i=r(3),u=r.n(i),l=(r(54),r(0)),d=function(e){var t=e.areaLevel,r=e.setAreaLevel,n=e.industry,c=e.setIndustry,a=[{name:"Country",value:4},{name:"Region",value:5},{name:"County",value:6},{name:"District",value:7}];return Object(l.jsxs)("div",{className:"sidebarStyle",children:[Object(l.jsx)("h2",{children:"\ud83d\udcb5 UK Business Activity Visualiser"}),Object(l.jsx)("p",{children:"Select an area to display information about its business enterprises"}),Object(l.jsxs)("div",{children:[Object(l.jsxs)("p",{children:["Select level"," ",Object(l.jsx)("select",{onChange:function(e){return r(Number(e.target.value))},children:a.map((function(e){return Object(l.jsx)("option",{value:e.value,children:e.name},e.value)}))})]}),Object(l.jsxs)("p",{children:["Current level:"," ",a.find((function(e){return e.value===t})).name]}),Object(l.jsxs)("p",{children:["Select industry"," ",Object(l.jsx)("select",{onChange:function(e){return c(e.target.value)},children:["01-03 : Agriculture, forestry & fishing","05-39 : Production","41-43 : Construction","45 : Motor trades","46 : Wholesale","47 : Retail","49-53 : Transport & Storage (inc postal)","55-56 : Accommodation & food services","58-63 : Information & communication","64-66 : Finance & insurance","68 : Property","69-75 : Professional, scientific & technical","77-82 : Business administration & support services","84 : Public administration & defence","85 : Education","86-88 : Health","90-99 : Arts, entertainment, recreation & other services"].map((function(e,t){return Object(l.jsx)("option",{value:e,children:e},t)}))})]}),Object(l.jsxs)("p",{children:["Current industry: ",n]})]})]})},f=r(11),b=r.n(f),j=r(29),v=r(30),p=r.n(v),h=function(){var e=Object(j.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("".concat("http://localhost:8000","/api/geocodes"),{level:t});case 2:return r=e.sent,e.abrupt("return",r.data.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y={getData:h};u.a.accessToken="pk.eyJ1Ijoic3llZHRhcWk5NSIsImEiOiJja3Vqbm5icHYwbG96Mm9ydnk1cnJlaDZrIn0.qQV61Wku6oqtKMj_Oa-Lew";var O=function(){var e=Object(n.useRef)(null),t=Object(n.useRef)(null),r=Object(n.useRef)(null),c=Object(n.useState)(4),a=Object(o.a)(c,2),s=a[0],i=a[1],f=Object(n.useState)("01-03 : Agriculture, forestry & fishing"),b=Object(o.a)(f,2),j=b[0],v=b[1],p=Object(n.useRef)(j),h=Object(n.useState)(null),O=Object(o.a)(h,2),m=O[0],g=O[1],x=function(){y.getData(s).then((function(e){if(g(e),r.current){var t=r.current;t.getSource("countries-source")&&t.getSource("countries-source").setData(e)}}))};return Object(n.useEffect)((function(){var n=new u.a.Map({container:e.current,style:"mapbox://styles/mapbox/dark-v10",center:[-3.0803,55.7186],zoom:5});r.current=n,n.addControl(new u.a.NavigationControl,"top-right"),n.on("load",(function(){x(),n.addSource("countries-source",{type:"geojson",data:m,generateId:!0}),n.addLayer({id:"countries-layer",type:"fill",source:"countries-source",layout:{},paint:{"fill-color":["interpolate",["linear"],["get",j],0,"#f75959",250,"#f47657",500,"#f29455",750,"#efb054",1e3,"#eccd52",2500,"#e9e851",5e3,"#c8e64f",7500,"#a8e24e",1e4,"#88df4d",12500,"#6adb4c",15e3,"#4dd74b",17500,"#4bd465",2e4,"#4ad07e",22500,"#4acc96",25e3,"#49c7ad",5e4,"#49c3c2",1e5,"#49a9bf",2e5,"#498fba",3e5,"#4976b5",4e5,"#4b61af",5e5,"#4d4fa8"],"fill-outline-color":"#FFFFFF","fill-opacity":["case",["boolean",["feature-state","hover"],!1],.9,.5]}});var e=new u.a.Popup({closeButton:!1,closeOnClick:!1});n.on("mousemove","countries-layer",(function(c){if(c.features.length>0){t.current>-1&&n.setFeatureState({source:"countries-source",id:t.current},{hover:!1});var a=c.features[0].id;n.setFeatureState({source:"countries-source",id:a},{hover:!0}),t.current=a,n.getCanvas().style.cursor="pointer";var s=c.lngLat,o="\n          <strong>".concat(c.features[0].properties.name,"</strong><br>\n          <div>").concat(c.features[0].properties[p.current].toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),"</div>\n          ");e.setLngLat(s).setHTML(o).addTo(r.current)}})),n.on("mouseleave","countries-layer",(function(){t.current>-1&&n.setFeatureState({source:"countries-source",id:t.current},{hover:!1}),t.current=null,n.getCanvas().style.cursor="",e.remove()}))}))}),[]),Object(n.useEffect)((function(){x()}),[s]),Object(n.useEffect)((function(){if(r.current){var e=r.current;e.getLayer("countries-layer")&&e.setPaintProperty("countries-layer","fill-color",["interpolate",["linear"],["get",j],0,"#f75959",250,"#f47657",500,"#f29455",750,"#efb054",1e3,"#eccd52",2500,"#e9e851",5e3,"#c8e64f",7500,"#a8e24e",1e4,"#88df4d",12500,"#6adb4c",15e3,"#4dd74b",17500,"#4bd465",2e4,"#4ad07e",22500,"#4acc96",25e3,"#49c7ad",5e4,"#49c3c2",1e5,"#49a9bf",2e5,"#498fba",3e5,"#4976b5",4e5,"#4b61af",5e5,"#4d4fa8"])}p.current=j}),[j]),Object(l.jsxs)("div",{children:[Object(l.jsx)(d,{areaLevel:s,setAreaLevel:i,industry:j,setIndustry:v}),Object(l.jsx)("div",{className:"map-container",ref:e})]})},m=(r(75),function(){return Object(l.jsxs)("div",{className:"footer",children:["Developed by Joel Edwardson and Syed Taqi Haider, 2021. View the source on"," ",Object(l.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/syedtaqi95/business-activity-frontend",children:"Github"}),"."]})});var g=function(){return Object(l.jsxs)("div",{children:[Object(l.jsx)(O,{}),Object(l.jsx)(m,{})]})};s.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(g,{})}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.579b75a1.chunk.js.map