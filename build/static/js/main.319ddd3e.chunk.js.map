{"version":3,"sources":["components/UserSettings/index.tsx","utils/index.ts","components/Legend/index.tsx","components/Loader/index.tsx","components/AreaDetails/index.tsx","services/geoJsonData.ts","components/Map/index.tsx","components/Footer/index.tsx","components/App.tsx","index.tsx"],"names":["UserSettings","areaLevel","setAreaLevel","updateGeoJsonData","industry","setIndustry","industryRef","areaLevels","name","value","className","onChange","e","newAreaLevel","Number","target","map","level","find","areaObj","newIndustry","current","group","idx","x","toString","replace","Legend","interpolations","numbers","colors","val","i","push","id","business","style","backgroundColor","utils","Loader","index","area","setSelectedArea","filteredProperties","Object","keys","properties","filter","key","onClick","property","getData","a","axios","post","process","res","data","geoJsonDataService","mapboxgl","workerClass","require","default","accessToken","Map","mapContainerRef","useRef","hoveredAreaRef","mapObjectRef","useState","geoJsonData","setGeoJsonData","colourInterpolations","setColourInterpolations","isLoading","setLoading","selectedArea","_map","getSource","setData","useEffect","newMaxBusinesses","features","reduce","prev","cur","interpolationDistance","Math","ceil","round","newInterpolations","el","setPaintProperty","container","center","zoom","addControl","NavigationControl","on","addSource","type","generateId","addLayer","source","layout","paint","popup","Popup","closeButton","closeOnClick","length","setFeatureState","hover","_hoveredArea","getCanvas","cursor","coordinates","lngLat","popupData","setLngLat","setHTML","addTo","remove","ref","Footer","rel","href","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.319ddd3e.chunk.js","sourcesContent":["import React from \"react\";\nimport \"./UserSettings.css\";\n\ninterface Props {\n  areaLevel: number;\n  setAreaLevel: (value: React.SetStateAction<number>) => void;\n  updateGeoJsonData: (newAreaLevel: number) => void;\n  industry: string;\n  setIndustry: React.Dispatch<React.SetStateAction<string>>;\n  mapObjectRef: React.MutableRefObject<mapboxgl.Map>;\n  industryRef: React.MutableRefObject<string>;\n}\n\nconst UserSettings = ({\n  areaLevel,\n  setAreaLevel,\n  updateGeoJsonData,\n  industry,\n  setIndustry,\n  industryRef,\n}: Props) => {\n  const areaLevels = [\n    {\n      name: \"Country\",\n      value: 4,\n    },\n    {\n      name: \"Region\",\n      value: 5,\n    },\n    {\n      name: \"County\",\n      value: 6,\n    },\n    {\n      name: \"District\",\n      value: 7,\n    },\n  ];\n\n  const industryGroups = [\n    \"01-03 : Agriculture, forestry & fishing\",\n    \"05-39 : Production\",\n    \"41-43 : Construction\",\n    \"45 : Motor trades\",\n    \"46 : Wholesale\",\n    \"47 : Retail\",\n    \"49-53 : Transport & Storage (inc postal)\",\n    \"55-56 : Accommodation & food services\",\n    \"58-63 : Information & communication\",\n    \"64-66 : Finance & insurance\",\n    \"68 : Property\",\n    \"69-75 : Professional, scientific & technical\",\n    \"77-82 : Business administration & support services\",\n    \"84 : Public administration & defence\",\n    \"85 : Education\",\n    \"86-88 : Health\",\n    \"90-99 : Arts, entertainment, recreation & other services\",\n  ];\n\n  const handleAreaLevelChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\n    const newAreaLevel = Number(e.target.value);\n    setAreaLevel(newAreaLevel);\n    updateGeoJsonData(newAreaLevel);\n  };\n\n  const handleIndustryChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\n    // update fill-color and popup data when industry changes\n    const newIndustry = e.target.value;\n    setIndustry(newIndustry);\n    industryRef.current = newIndustry;\n  };\n\n  return (\n    <div className=\"sidebarStyle\">\n      <h2>\n        <u>💵 UK Business Activity Visualiser</u>\n      </h2>\n      <p>\n        Select an area to display information about its business enterprises\n      </p>\n\n      <div>\n        <p>\n          Select level{\" \"}\n          <select onChange={handleAreaLevelChange}>\n            {areaLevels.map((level) => (\n              <option key={level.value} value={level.value}>\n                {level.name}\n              </option>\n            ))}\n          </select>\n        </p>\n        <p>\n          Current level:{\" \"}\n          {areaLevels.find((areaObj) => areaObj.value === areaLevel).name}\n        </p>\n\n        <p>\n          Select industry{\" \"}\n          <select onChange={handleIndustryChange}>\n            {industryGroups.map((group: string, idx: number) => (\n              <option key={idx} value={group}>\n                {group}\n              </option>\n            ))}\n          </select>\n        </p>\n        <p>Current industry: {industry}</p>\n      </div>\n    </div>\n  );\n};\n\nexport default UserSettings;\n","const numberWithCommas = (x: number) => {\n  return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n};\n\nexport default { numberWithCommas };\n","import React from \"react\";\nimport \"./Legend.css\";\nimport utils from \"../../utils\";\n\ninterface Props {\n  interpolations: (string | number)[];\n}\n\nconst Legend = ({ interpolations }: Props) => {\n  const numbers: number[] = [];\n  const colors: string[] = [];\n\n  interpolations.map((val, i) => {\n    if (i % 2 === 0) {\n      numbers.push(val as number);\n    } else colors.push(val as string);\n  });\n\n  return (\n    <div id=\"legend\">\n      {numbers.map((business, i) => {\n        return (\n          <div key={i}>\n            <span className=\"legend-key\" style={{ backgroundColor: colors[i] }}>\n              {\" \"}\n            </span>\n            <span>{utils.numberWithCommas(business)}</span>\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default Legend;\n","import React from \"react\";\nimport \"./Loader.css\";\n\nconst Loader = () => {\n  return <div className=\"loader\"></div>;\n};\n\nexport default Loader;\n","import { MapboxGeoJSONFeature } from \"mapbox-gl\";\nimport React from \"react\";\nimport \"./AreaDetails.css\";\nimport utils from \"../../utils\";\n\ninterface Props {\n  area: MapboxGeoJSONFeature;\n  setSelectedArea: React.Dispatch<mapboxgl.MapboxGeoJSONFeature>;\n}\n\nconst index = ({ area, setSelectedArea }: Props) => {\n  // Remove the name and id from the properties object\n  const filteredProperties = Object.keys(area.properties).filter(\n    (key) => key !== \"name\" && key !== \"id\"\n  );\n\n  return (\n    <div className=\"area-details\">\n      <h2>\n        <u>📍 {area.properties.name}</u>\n        <button\n          className=\"close-button\"\n          onClick={() => setSelectedArea(null)}\n        >X</button>\n      </h2>\n      <table>\n        <tbody>\n        {filteredProperties.map((property) => {\n          return (\n            <tr key={property}>\n              <td>{property}</td>\n              <td>{utils.numberWithCommas(area.properties[property])}</td>\n            </tr>\n          );\n        })}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\nexport default index;\n","import axios, { AxiosResponse } from \"axios\";\nconst baseUrl = process.env.REACT_APP_BACKEND_URL;\n\ninterface GeoCodesResponseType {\n  message: string;\n  data:\n    | GeoJSON.Feature<GeoJSON.Geometry>\n    | GeoJSON.FeatureCollection<GeoJSON.Geometry>\n    | string;\n}\n\nconst getData = async (level: number) => {\n  const res: AxiosResponse<GeoCodesResponseType, string> = await axios.post(\n    `${baseUrl}/api/geocodes`,\n    {\n      level: level,\n    }\n  );\n  return res.data.data;\n};\n\nconst geoJsonDataService = { getData };\n\nexport default geoJsonDataService;\n","import React, { useRef, useEffect, useState } from \"react\";\nimport mapboxgl from \"mapbox-gl\";\nimport \"./Map.css\";\nimport UserSettings from \"../UserSettings\";\nimport Legend from \"../Legend\";\nimport Loader from \"../Loader\";\nimport AreaDetails from \"../AreaDetails\";\nimport geoJsonDataService from \"../../services/geoJsonData\";\nimport utils from \"../../utils\";\n\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nmapboxgl.workerClass =\n  // eslint-disable-next-line @typescript-eslint/no-var-requires\n  require(\"worker-loader!mapbox-gl/dist/mapbox-gl-csp-worker\").default;\n\nmapboxgl.accessToken = process.env.REACT_APP_MAPBOX_ACCESS_TOKEN;\n\nconst Map = () => {\n  const mapContainerRef: React.MutableRefObject<HTMLDivElement> = useRef(null); // used to create the map on page load\n  const hoveredAreaRef: React.MutableRefObject<string | number> = useRef(null); // used to create the popup hover effect\n  const mapObjectRef = useRef(null); // stores the map object\n\n  const [areaLevel, setAreaLevel]: [\n    number,\n    React.Dispatch<React.SetStateAction<number>>\n  ] = useState(4); // country(4), region(5), county(6), district(7)\n\n  const [industry, setIndustry]: [\n    string,\n    React.Dispatch<React.SetStateAction<string>>\n  ] = useState(\"01-03 : Agriculture, forestry & fishing\"); // broad industry groups\n\n  const industryRef: React.MutableRefObject<string> = useRef(industry); // used in mousemove callback to always uses the latest industry\n\n  const [geoJsonData, setGeoJsonData] = useState(null); // data from server\n\n  const [colourInterpolations, setColourInterpolations] = useState([\n    500,\n    \"#4976b5\",\n    1000,\n    \"#49a9bf\",\n    5000,\n    \"#49c7ad\",\n    10000,\n    \"#4ad07e\",\n    15000,\n    \"#4dd74b\",\n    20000,\n    \"#88df4d\",\n    25000,\n    \"#c8e64f\",\n    100000,\n    \"#eccd52\",\n    300000,\n    \"#f29455\",\n    500000,\n    \"#f75959\",\n  ]);\n\n  const [isLoading, setLoading]: [\n    boolean,\n    React.Dispatch<React.SetStateAction<boolean>>\n  ] = useState(false); // used to render the loader component\n\n  const [selectedArea, setSelectedArea]: [\n    mapboxgl.MapboxGeoJSONFeature,\n    React.Dispatch<mapboxgl.MapboxGeoJSONFeature>\n  ] = useState(null); // populated when a user clicks on an area\n\n  // callback function to get geoJSON data from server\n  // updates the map source with the new geoJSON data\n  const updateGeoJsonData = async (newAreaLevel: number) => {\n    setLoading(true);\n    const data = await geoJsonDataService.getData(newAreaLevel);\n    setGeoJsonData(data);\n    if (mapObjectRef.current) {\n      const _map = mapObjectRef.current;\n      if (_map.getSource(\"countries-source\")) {\n        _map.getSource(\"countries-source\").setData(data);\n      }\n    }\n    setLoading(false);\n  };\n\n  // Update the colour scale based on the max number of businesses\n  useEffect(() => {\n    if (geoJsonData) {\n      const newMaxBusinesses = geoJsonData.features.reduce((prev, cur) =>\n        prev.properties[industry] > cur.properties[industry] ? prev : cur\n      ).properties[industry];\n\n      const interpolationDistance =\n        Math.ceil(Math.round(newMaxBusinesses / 9) / 100) * 100;\n\n      const newInterpolations = colourInterpolations.map((el, idx) =>\n        idx % 2 === 0 ? (idx / 2) * interpolationDistance : el\n      );\n\n      setColourInterpolations(newInterpolations);\n\n      mapObjectRef.current.setPaintProperty(\"countries-layer\", \"fill-color\", [\n        \"interpolate\",\n        [\"linear\"],\n        [\"get\", industry],\n        ...newInterpolations,\n      ]);\n    }\n  }, [geoJsonData, industry]);\n\n  // Runs on page load\n  // Sets up the map source and layer and related callback functions\n  useEffect(() => {\n    const map = new mapboxgl.Map({\n      container: mapContainerRef.current,\n      style: \"mapbox://styles/mapbox/dark-v10\",\n      center: [-3.0803, 55.7186],\n      zoom: 5,\n    });\n    mapObjectRef.current = map;\n\n    // Add navigation control (the +/- zoom buttons)\n    map.addControl(new mapboxgl.NavigationControl(), \"top-right\");\n\n    map.on(\"load\", () => {\n      updateGeoJsonData(areaLevel);\n\n      // Add the geoJSON data as a source and layer\n      map.addSource(\"countries-source\", {\n        type: \"geojson\",\n        data: geoJsonData as\n          | GeoJSON.Feature<GeoJSON.Geometry>\n          | GeoJSON.FeatureCollection<GeoJSON.Geometry>\n          | string,\n        generateId: true,\n      });\n\n      map.addLayer({\n        id: \"countries-layer\",\n        type: \"fill\",\n        source: \"countries-source\",\n        layout: {},\n        paint: {\n          \"fill-color\": [\n            \"interpolate\",\n            [\"linear\"],\n            [\"get\", industry],\n            ...colourInterpolations,\n          ],\n          \"fill-outline-color\": \"#FFFFFF\",\n          \"fill-opacity\": [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            0.9,\n            0.5,\n          ],\n        },\n      });\n\n      // Create a popup but don't add it to the map yet.\n      const popup = new mapboxgl.Popup({\n        closeButton: false,\n        closeOnClick: false,\n      });\n\n      map.on(\"mousemove\", \"countries-layer\", (e) => {\n        if (e.features.length > 0) {\n          // When the user moves their mouse over an area, we'll update the\n          // feature state for the feature under the mouse.\n          if (hoveredAreaRef.current > -1) {\n            map.setFeatureState(\n              { source: \"countries-source\", id: hoveredAreaRef.current },\n              { hover: false }\n            );\n          }\n\n          const _hoveredArea = e.features[0].id;\n          map.setFeatureState(\n            { source: \"countries-source\", id: _hoveredArea },\n            { hover: true }\n          );\n\n          hoveredAreaRef.current = _hoveredArea;\n\n          // Change the cursor style as a UI indicator.\n          map.getCanvas().style.cursor = \"pointer\";\n\n          // Get the pointer coordinates\n          const coordinates: mapboxgl.LngLat = e.lngLat;\n\n          const popupData = `\n          <strong>${e.features[0].properties.name}</strong><br>\n          <div>${utils.numberWithCommas(\n            e.features[0].properties[industryRef.current]\n          )}</div>\n          `;\n\n          // Populate the popup and set its coordinates\n          // based on the feature found.\n          popup\n            .setLngLat(coordinates)\n            .setHTML(popupData)\n            .addTo(mapObjectRef.current);\n        }\n      });\n\n      map.on(\"mouseleave\", \"countries-layer\", () => {\n        // When the mouse leaves the state-fill layer, update the feature state of the\n        // previously hovered feature.\n        if (hoveredAreaRef.current > -1) {\n          map.setFeatureState(\n            { source: \"countries-source\", id: hoveredAreaRef.current },\n            { hover: false }\n          );\n        }\n        hoveredAreaRef.current = null;\n\n        // Remove the popup and reset the cursor\n        map.getCanvas().style.cursor = \"\";\n        popup.remove();\n      });\n\n      // When an area is clicked, save it to selectedArea to display in AreaDetails component\n      map.on(\"click\", \"countries-layer\", (e) => setSelectedArea(e.features[0]));\n    });\n  }, []);\n\n  return (\n    <div>\n      <UserSettings\n        areaLevel={areaLevel}\n        setAreaLevel={setAreaLevel}\n        updateGeoJsonData={updateGeoJsonData}\n        industry={industry}\n        setIndustry={setIndustry}\n        mapObjectRef={mapObjectRef}\n        industryRef={industryRef}\n      />\n      <Legend interpolations={colourInterpolations} />\n      {isLoading && <Loader />}\n      {selectedArea && (\n        <AreaDetails area={selectedArea} setSelectedArea={setSelectedArea} />\n      )}\n      <div className=\"map-container\" ref={mapContainerRef} />\n    </div>\n  );\n};\n\nexport default Map;\n","import React from \"react\";\nimport \"./Footer.css\";\n\nconst Footer = () => {\n  return (\n    <div className=\"footer\">\n      Developed by Joel Edwardson and Syed Taqi Haider, 2021. View the source on{\" \"}\n      <a\n        target=\"_blank\"\n        rel=\"noreferrer\"\n        href=\"https://github.com/syedtaqi95/business-activity-frontend\"\n      >\n        Github\n      </a>\n      .\n    </div>\n  );\n};\n\nexport default Footer;\n","import React from \"react\";\nimport Map from \"./Map\";\nimport Footer from \"./Footer\";\n\nfunction App() {\n  return (\n    <div>\n      <Map />\n      <Footer />\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"mapbox-gl/dist/mapbox-gl.css\";\nimport \"./index.css\";\nimport App from \"./components/App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}